# vue-zhihu

ä¸€ä¸ªä»¿çŸ¥ä¹ä¸“æ çš„å° `demo` ï¼Œè¯•å›¾æ‰‹å†™ç»„ä»¶+æ ·å¼ï¼Œäºæ˜¯è¿›åº¦é¾Ÿé€Ÿã€‚

- [vue-zhihu](#vue-zhihu)
  - [Appé¡µ](#appé¡µ)
  - [é¦–é¡µ](#é¦–é¡µ)
  - [è¿›åº¦](#è¿›åº¦)
  - [Project setup](#project-setup)
    - [Compiles and hot-reloads for development](#compiles-and-hot-reloads-for-development)
    - [Compiles and minifies for production](#compiles-and-minifies-for-production)
    - [Customize configuration](#customize-configuration)

## Appé¡µ

å› ä¸ºè¯¥ `demo` æ‰€æœ‰é¡µé¢çš„æ•´ä½“å¸ƒå±€ç±»ä¼¼ï¼Œéƒ½æ‹¥æœ‰ä¸€ä¸ª `header` å’Œä¸€ä¸ª `footer`ï¼Œ æ‰€ä»¥åœ¨ `App` é¡µé¢æ”¾ç½®ä¸‰ä¸ªç»„ä»¶ï¼Œ`header` `footer` å’Œ `router-view`ã€‚

## é¦–é¡µ

é»˜è®¤è·¯ç”±æŒ‡å‘çš„é¡µé¢ï¼Œä¸éœ€è¦æƒé™æ§åˆ¶ã€‚ç®€å•æ‹†åˆ†äº†å‡ ä¸ªå°ç»„ä»¶ï¼Œå±•ç¤ºç”¨é€”çš„ä¸æã€‚
ä¸‹æ–¹çš„ä¸“æ åˆ—è¡¨æä¸€ä¸‹æ ·å¼é—®é¢˜ã€‚

éœ€è¦è®©ä¸“æ åˆ—è¡¨çš„æ€»å®½åº¦é™åˆ¶åœ¨ä¸€å®šèŒƒå›´å†…ï¼Œä¾‹å¦‚ `1320px`ï¼Œ æ¯ä¸ªä¸“æ å—å æ¯ä¸€è¡Œçš„ `1/3`ï¼Œ ç¼©æ”¾æ—¶ä¸“æ ä¹Ÿè·Ÿç€ç¼©å°åšåˆ°å“åº”å¼ã€‚

å¯ä»¥é€‰æ‹©ä½¿ä¸“æ å¤–å®¹å™¨çš„ `max-width` ä¸ºæˆ‘ä»¬éœ€è¦çš„å®½åº¦ï¼Œé‚£ä¹ˆå®¹å™¨åœ¨å°äºè¿™ä¸ªå®½åº¦æ—¶ä¼šè‡ªåŠ¨ç¼©å°ã€‚

å†æä¸€ä¸‹å­å®¹å™¨å¦‚ä½•åšåˆ°å¹³åˆ†ä¸”å›ºå®šä¸º `1/3`ã€‚

å¦‚æœæˆ‘ä»¬ç®€å•åœ°ä½¿å­å®¹å™¨å®½åº¦ä¸º `33.33%`ï¼Œç„¶åçˆ¶å®¹å™¨ `flex` å¹¶ä¸”ä½¿å­å®¹å™¨ `flex:1`, å…¶å®åœ¨ç¼©æ”¾æ—¶ä¼šå‡ºç°é—®é¢˜ã€‚ï¼ˆé—®é¢˜å‡ºç°åœ¨ç»™å­å®¹å™¨è®¾ç½®äº†å¤–è¾¹è·çš„æƒ…å†µä¸‹ï¼‰

å› ä¸ºå­å®¹å™¨æ˜¯éœ€è¦è¾¹è·æ’‘å¼€å½¼æ­¤é—´è·ç¦»çš„ï¼Œä½†å¤–è¾¹è·çš„è®¾ç½®åˆä¼šå½±å“åˆ° `flex` æ’åˆ—å¯¼è‡´ä¸€è¡Œæ— æ³•è¢«å‡åˆ†ï¼Œå­å®¹å™¨ç›´æ¥æ¢è¡Œã€‚

è§£å†³æ–¹æ³•æ˜¯ç»™æ¯ä¸ªå­å®¹å™¨åŒ…è£¹ä¸€ä¸ªå¤–å±‚ç¡®å®šä½ç½®çš„æ ‡ç­¾ï¼Œè€Œè¾¹æ¡†çº¿ï¼Œå†…è¾¹è·ï¼Œä¸Šä¸‹è¾¹è·ç›´æ¥åœ¨å†…éƒ¨è¿›è¡Œè®¾ç½®ã€‚è€Œå¤–å±‚ä¹‹é—´çš„é—´è·é å†…è¾¹è·æ’‘å¼€ï¼Œè¿™æ ·ä¸ä¼šå½±å“åˆ°è¡Œå†…å¸ƒå±€ï¼ŒåŒæ—¶éœ€è¦æ³¨æ„ç»™ç›’å­çš„ `box-sizing` è®¾ç½®ä¸º `border-box`ã€‚

![image-20201007192252639](resouces/README/image-20201007192252639.png)

ç‚¹åæä¸€ä¸‹æˆ‘çš„ä¸‹æ‹‰åˆ—è¡¨ğŸ˜­

å®ƒé•¿è¿™æ ·ğŸ‘‡

![image-20201007193912247](resouces/README/image-20201007193912247.png)

æ ·å¼ï¼Œå’Œæ’æ§½éƒ¨åˆ†ä¸æã€‚

é‡ç‚¹æ˜¯ä¸€ä¸ª `hook` ,ä¸‹æ‹‰åˆ—è¡¨æœ‰ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯ï¼Œå½“ç”¨æˆ·ç‚¹å¼€åç‚¹å‡»åˆ°å…¶ä»–åŒºåŸŸï¼Œéœ€è¦å°†åˆ—è¡¨æ”¶èµ·ã€‚

è¿™æ ·çš„ç‚¹å‡»äº‹ä»¶éœ€è¦æ³¨å†Œåœ¨ `document` ä¸Šï¼Œé‚£ä¹ˆå°±æ˜¯åœ¨ä¸‹æ‹‰åˆ—è¡¨ç»„ä»¶åŠ è½½åå¼€å§‹æ³¨å†Œï¼Œç„¶ååœ¨é”€æ¯ç»„ä»¶æ—¶ç§»é™¤ã€‚

```js
import { onMounted, onUnMounted } from 'vue';
export default {
  setup() {
    const handler = (e) => {
      // ç‚¹å‡»äº‹ä»¶å¤„ç†
      // if å½“å‰ç»‘å®šçš„ä¸‹æ‹‰åˆ—è¡¨ç»„ä»¶å­˜åœ¨ã€‚
      // åˆ¤æ–­ e.target æ˜¯å¦ä¸ºä¸‹æ‹‰åˆ—è¡¨ï¼Œå¹¶ä¸”æ­¤æ—¶ä¸‹æ‹‰åˆ—è¡¨éœ€è¦æ˜¯æ˜¾ç¤ºçŠ¶æ€ã€‚
      // å³æ§åˆ¶ä¸‹æ‹‰åˆ—è¡¨æ˜¾ç¤ºçš„å˜é‡éœ€è¦ä¸º true ã€‚
      // é‚£ä¹ˆè®¾ç½®æ§åˆ¶ä¸‹æ‹‰åˆ—è¡¨æ˜¾ç¤ºçš„å˜é‡ä¸º false ã€‚
    }
    onMounted(() => {
      document.addEventListener('click', handler);
    });
    onUnmounted(() => {
      document.removeEventListener('click', handler);
    });
    return {
      handler
    }
  }
};
```

ä»¥ä¸Šæ˜¯åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨çš„ç¤ºä¾‹ï¼Œä½†å®é™…ä¸Šè¿™äº›ä»£ç ä¸è§†å›¾æ¨¡æ¿å¹¶æ²¡æœ‰ç‰¹åˆ«å¤§çš„å…³ç³»ï¼Œå¯ä»¥æŠ½å–å‡ºæ¥ã€‚ç»™å‡ºä¸€ä¸ªæ˜¯å¦ç‚¹å‡»å…¶ä½™ä½ç½®çš„çŠ¶æ€å€¼ï¼Œä¾¦å¬è¿™ä¸ªå€¼ï¼Œæ”¹å˜æ—¶è¿›è¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦éšè—ä¸‹æ‹‰åˆ—è¡¨ã€‚

```js
// src/hooks/useClickOutside.js
import { ref, onMounted, onUnmounted } from 'vue';
/**
 * useClickOutside æ£€æµ‹ç‚¹å‡»äº‹ä»¶æ˜¯å¦ç‚¹å‡»åˆ°ç›®æ ‡domå¯¹è±¡ä¹‹å¤–ã€‚
 * @param {HTMLElement} elemRef ç›®æ ‡domå¯¹è±¡ï¼Œæ­¤å¤„ç‰¹å®šä¸º vue.ref çš„è¿”å›æŒ‡
 */
const useClickOutside = elemRef => {
  const isClickOutside = ref(false);
  // çŠ¶æ€å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦ç‚¹å‡»åˆ°å¤–ä¾§ï¼Œé»˜è®¤ä¸ºfalse
  /**
   * handler ç‚¹å‡»äº‹ä»¶çš„å›è°ƒå‡½æ•°
   * @param {MouseEvent} e é¼ æ ‡ç‚¹å‡»äº‹ä»¶å¯¹è±¡
   */
  const handler = e => {
    // ä¼ å…¥çš„ dom å¼•ç”¨éœ€è¦æœ‰å€¼
    if (elemRef.value) {
      // å½“å‰ç‚¹å‡»çš„ dom å…ƒç´ æ˜¯å¦åŒ…å«åœ¨ç›®æ ‡å…ƒç´ å†…ï¼Œæ˜¯çš„è¯åˆ™åˆ¤å®šæ²¡æœ‰ç‚¹å‡»åˆ°å¤–ä¾§
      if (elemRef.value.contains(e.target)) {
        isClickOutside.value = false;
      } else {
        isClickOutside.value = true;
      }
    }
  };
  // ç»‘å®šç‚¹å‡»äº‹ä»¶
  onMounted(() => {
    document.addEventListener('click', handler);
  });
  // ç§»é™¤ç‚¹å‡»äº‹ä»¶
  onUnmounted(() => {
    document.removeEventListener('click', handler);
  });
  return isClickOutside;
};
export default useClickOutside;

```

æ­¤æ—¶å°†è¿™ä¸ª `hook` å¼•å…¥ç»„ä»¶å†…ï¼Œç›´æ¥ä¼ å…¥æˆ‘ä»¬ä¿å­˜å¥½çš„ `ref` å¯¹è±¡å³å¯ã€‚

```js
const isClickOutside = useClickOutside(dropDownRef);
// è°ƒç”¨è‡ªå®šä¹‰å‡½æ•°å¾—åˆ°æ£€æµ‹ç‚¹å‡»çš„çŠ¶æ€å€¼ã€‚
watch(isClickOutside, () => {
// ä¾¦å¬ç‚¹å‡»çŠ¶æ€å€¼ï¼Œå‘ç”Ÿå˜åŒ–æ—¶åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°ä¸‹æ‹‰çŠ¶æ€çš„æ˜¾ç¤ºã€‚
  if (isMenuShow.value && isClickOutside.value) {
    isMenuShow.value = false;
  }
});
```

## è¿›åº¦

- [x] é¦–é¡µ
- [ ] ç™»å½•
- [ ] æ³¨å†Œ
- [ ] ä¸ªäººä¿¡æ¯
- [ ] å‘å¸ƒæ–‡ç« 
- [ ] ç”¨æˆ·ä¸“æ åˆ—è¡¨
- [ ] æ–‡ç« è¯¦æƒ…é¡µ
- [ ] æƒé™æ§åˆ¶
- [ ] å…¨å±€çŠ¶æ€ç®¡ç†

## Project setup

```
npm install
```

### Compiles and hot-reloads for development

```
npm run serve
```

### Compiles and minifies for production

```
npm run build
```

### Customize configuration

See [Configuration Reference](https://cli.vuejs.org/config/).
